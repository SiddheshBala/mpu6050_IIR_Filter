ARM GAS  C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"swo.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/swo.c"
  20              		.section	.text.SWO_PrintChar,"ax",%progbits
  21              		.align	1
  22              		.global	SWO_PrintChar
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	SWO_PrintChar:
  28              	.LFB0:
   1:Core/Src/swo.c **** /*
   2:Core/Src/swo.c ****  * swo.c
   3:Core/Src/swo.c ****  *
   4:Core/Src/swo.c ****  *  Created on: 10.10.2016
   5:Core/Src/swo.c ****  *      Author: Erich Styger Local
   6:Core/Src/swo.c ****  */
   7:Core/Src/swo.c **** 
   8:Core/Src/swo.c **** #include "swo.h"
   9:Core/Src/swo.c **** #include <stdint.h>
  10:Core/Src/swo.c **** #include "TraceRegisters.h"
  11:Core/Src/swo.c **** 
  12:Core/Src/swo.c **** /*!
  13:Core/Src/swo.c ****  * \brief Sends a character over the SWO channel. See as well ITM_SendChar() in core_cm4.h
  14:Core/Src/swo.c ****  * \param c Character to be sent
  15:Core/Src/swo.c ****  * \param portNo SWO channel number, value in the range of 0 to 31
  16:Core/Src/swo.c ****  */
  17:Core/Src/swo.c **** void SWO_PrintChar(char c, uint8_t portNo) {
  29              		.loc 1 17 44
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 16
  32              		@ frame_needed = 1, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34 0000 80B4     		push	{r7}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 4
  37              		.cfi_offset 7, -4
  38 0002 85B0     		sub	sp, sp, #20
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 24
  41 0004 00AF     		add	r7, sp, #0
ARM GAS  C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s 			page 2


  42              	.LCFI2:
  43              		.cfi_def_cfa_register 7
  44 0006 0346     		mov	r3, r0
  45 0008 0A46     		mov	r2, r1
  46 000a FB71     		strb	r3, [r7, #7]
  47 000c 1346     		mov	r3, r2
  48 000e BB71     		strb	r3, [r7, #6]
  18:Core/Src/swo.c ****   volatile int timeout;
  19:Core/Src/swo.c **** 
  20:Core/Src/swo.c ****   /* Check if Trace Control Register (ITM->TCR at 0xE0000E80) is set */
  21:Core/Src/swo.c ****   if ((ITM->TCR&ITM_TCR_ITMENA_Msk) == 0) { /* check Trace Control Register if ITM trace is enabled
  49              		.loc 1 21 11
  50 0010 4FF06043 		mov	r3, #-536870912
  51 0014 D3F8803E 		ldr	r3, [r3, #3712]
  52              		.loc 1 21 16
  53 0018 03F00103 		and	r3, r3, #1
  54              		.loc 1 21 6
  55 001c 002B     		cmp	r3, #0
  56 001e 20D0     		beq	.L7
  22:Core/Src/swo.c ****     return; /* not enabled? */
  23:Core/Src/swo.c ****   }
  24:Core/Src/swo.c ****   /* Check if the requested channel stimulus port (ITM->TER at 0xE0000E00) is enabled */
  25:Core/Src/swo.c ****   if ((ITM->TER & (1ul<<portNo))==0) { /* check Trace Enable Register if requested port is enabled 
  57              		.loc 1 25 11
  58 0020 4FF06043 		mov	r3, #-536870912
  59 0024 D3F8002E 		ldr	r2, [r3, #3584]
  60              		.loc 1 25 33
  61 0028 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
  62 002a 22FA03F3 		lsr	r3, r2, r3
  63 002e 03F00103 		and	r3, r3, #1
  64              		.loc 1 25 6
  65 0032 002B     		cmp	r3, #0
  66 0034 17D0     		beq	.L8
  26:Core/Src/swo.c ****     return; /* requested port not enabled? */
  27:Core/Src/swo.c ****   }
  28:Core/Src/swo.c ****   timeout = 5000; /* arbitrary timeout value */
  67              		.loc 1 28 11
  68 0036 41F28833 		movw	r3, #5000
  69 003a FB60     		str	r3, [r7, #12]
  29:Core/Src/swo.c ****   while (ITM->PORT[portNo].u32 == 0) {
  70              		.loc 1 29 9
  71 003c 05E0     		b	.L5
  72              	.L6:
  30:Core/Src/swo.c ****     /* Wait until STIMx is ready, then send data */
  31:Core/Src/swo.c ****     timeout--;
  73              		.loc 1 31 12
  74 003e FB68     		ldr	r3, [r7, #12]
  75 0040 013B     		subs	r3, r3, #1
  76 0042 FB60     		str	r3, [r7, #12]
  32:Core/Src/swo.c ****     if (timeout==0) {
  77              		.loc 1 32 16
  78 0044 FB68     		ldr	r3, [r7, #12]
  79              		.loc 1 32 8
  80 0046 002B     		cmp	r3, #0
  81 0048 0FD0     		beq	.L9
  82              	.L5:
  29:Core/Src/swo.c ****   while (ITM->PORT[portNo].u32 == 0) {
ARM GAS  C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s 			page 3


  83              		.loc 1 29 13
  84 004a 4FF06042 		mov	r2, #-536870912
  29:Core/Src/swo.c ****   while (ITM->PORT[portNo].u32 == 0) {
  85              		.loc 1 29 27
  86 004e BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
  87 0050 52F82330 		ldr	r3, [r2, r3, lsl #2]
  29:Core/Src/swo.c ****   while (ITM->PORT[portNo].u32 == 0) {
  88              		.loc 1 29 32
  89 0054 002B     		cmp	r3, #0
  90 0056 F2D0     		beq	.L6
  33:Core/Src/swo.c ****       return; /* not able to send */
  34:Core/Src/swo.c ****     }
  35:Core/Src/swo.c ****   }
  36:Core/Src/swo.c **** #if 0 /* different version for Cortex-M3 needed? */
  37:Core/Src/swo.c ****   ITM->PORT[portNo].u16 = 0x08 | (c<<8);
  38:Core/Src/swo.c **** #else
  39:Core/Src/swo.c ****   ITM_STIM_U8 = c; /* send data */
  91              		.loc 1 39 3
  92 0058 4FF06042 		mov	r2, #-536870912
  93              		.loc 1 39 15
  94 005c FB79     		ldrb	r3, [r7, #7]
  95 005e 1370     		strb	r3, [r2]
  96 0060 04E0     		b	.L1
  97              	.L7:
  22:Core/Src/swo.c ****   }
  98              		.loc 1 22 5
  99 0062 00BF     		nop
 100 0064 02E0     		b	.L1
 101              	.L8:
  26:Core/Src/swo.c ****   }
 102              		.loc 1 26 5
 103 0066 00BF     		nop
 104 0068 00E0     		b	.L1
 105              	.L9:
  33:Core/Src/swo.c ****       return; /* not able to send */
 106              		.loc 1 33 7
 107 006a 00BF     		nop
 108              	.L1:
  40:Core/Src/swo.c **** #endif
  41:Core/Src/swo.c **** }
 109              		.loc 1 41 1
 110 006c 1437     		adds	r7, r7, #20
 111              	.LCFI3:
 112              		.cfi_def_cfa_offset 4
 113 006e BD46     		mov	sp, r7
 114              	.LCFI4:
 115              		.cfi_def_cfa_register 13
 116              		@ sp needed
 117 0070 5DF8047B 		ldr	r7, [sp], #4
 118              	.LCFI5:
 119              		.cfi_restore 7
 120              		.cfi_def_cfa_offset 0
 121 0074 7047     		bx	lr
 122              		.cfi_endproc
 123              	.LFE0:
 125              		.section	.text.SWO_PrintString,"ax",%progbits
 126              		.align	1
ARM GAS  C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s 			page 4


 127              		.global	SWO_PrintString
 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 132              	SWO_PrintString:
 133              	.LFB1:
  42:Core/Src/swo.c **** 
  43:Core/Src/swo.c **** /*!
  44:Core/Src/swo.c ****  * \brief Sends a string over SWO to the host
  45:Core/Src/swo.c ****  * \param s String to send
  46:Core/Src/swo.c ****  * \param portNumber Port number, 0-31, use 0 for normal debug strings
  47:Core/Src/swo.c ****  */
  48:Core/Src/swo.c **** void SWO_PrintString(const char *s, uint8_t portNumber) {
 134              		.loc 1 48 57
 135              		.cfi_startproc
 136              		@ args = 0, pretend = 0, frame = 8
 137              		@ frame_needed = 1, uses_anonymous_args = 0
 138 0000 80B5     		push	{r7, lr}
 139              	.LCFI6:
 140              		.cfi_def_cfa_offset 8
 141              		.cfi_offset 7, -8
 142              		.cfi_offset 14, -4
 143 0002 82B0     		sub	sp, sp, #8
 144              	.LCFI7:
 145              		.cfi_def_cfa_offset 16
 146 0004 00AF     		add	r7, sp, #0
 147              	.LCFI8:
 148              		.cfi_def_cfa_register 7
 149 0006 7860     		str	r0, [r7, #4]
 150 0008 0B46     		mov	r3, r1
 151 000a FB70     		strb	r3, [r7, #3]
  49:Core/Src/swo.c ****   while (*s!='\0') {
 152              		.loc 1 49 9
 153 000c 08E0     		b	.L11
 154              	.L12:
  50:Core/Src/swo.c ****     SWO_PrintChar(*s++, portNumber);
 155              		.loc 1 50 21
 156 000e 7B68     		ldr	r3, [r7, #4]
 157 0010 5A1C     		adds	r2, r3, #1
 158 0012 7A60     		str	r2, [r7, #4]
 159              		.loc 1 50 5
 160 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 161 0016 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 162 0018 1146     		mov	r1, r2
 163 001a 1846     		mov	r0, r3
 164 001c FFF7FEFF 		bl	SWO_PrintChar
 165              	.L11:
  49:Core/Src/swo.c ****   while (*s!='\0') {
 166              		.loc 1 49 10
 167 0020 7B68     		ldr	r3, [r7, #4]
 168 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  49:Core/Src/swo.c ****   while (*s!='\0') {
 169              		.loc 1 49 12
 170 0024 002B     		cmp	r3, #0
 171 0026 F2D1     		bne	.L12
  51:Core/Src/swo.c ****   }
  52:Core/Src/swo.c **** }
ARM GAS  C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s 			page 5


 172              		.loc 1 52 1
 173 0028 00BF     		nop
 174 002a 00BF     		nop
 175 002c 0837     		adds	r7, r7, #8
 176              	.LCFI9:
 177              		.cfi_def_cfa_offset 8
 178 002e BD46     		mov	sp, r7
 179              	.LCFI10:
 180              		.cfi_def_cfa_register 13
 181              		@ sp needed
 182 0030 80BD     		pop	{r7, pc}
 183              		.cfi_endproc
 184              	.LFE1:
 186              		.section	.text.SWO_Init,"ax",%progbits
 187              		.align	1
 188              		.global	SWO_Init
 189              		.syntax unified
 190              		.thumb
 191              		.thumb_func
 193              	SWO_Init:
 194              	.LFB2:
  53:Core/Src/swo.c **** 
  54:Core/Src/swo.c **** /*!
  55:Core/Src/swo.c ****  * \brief Initialize the SWO trace port for debug message printing
  56:Core/Src/swo.c ****  * \param portBits Port bit mask to be configured
  57:Core/Src/swo.c ****  * \param cpuCoreFreqHz CPU core clock frequency in Hz
  58:Core/Src/swo.c ****  */
  59:Core/Src/swo.c **** void SWO_Init(uint32_t portBits, uint32_t cpuCoreFreqHz) {
 195              		.loc 1 59 58
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 16
 198              		@ frame_needed = 1, uses_anonymous_args = 0
 199              		@ link register save eliminated.
 200 0000 80B4     		push	{r7}
 201              	.LCFI11:
 202              		.cfi_def_cfa_offset 4
 203              		.cfi_offset 7, -4
 204 0002 85B0     		sub	sp, sp, #20
 205              	.LCFI12:
 206              		.cfi_def_cfa_offset 24
 207 0004 00AF     		add	r7, sp, #0
 208              	.LCFI13:
 209              		.cfi_def_cfa_register 7
 210 0006 7860     		str	r0, [r7, #4]
 211 0008 3960     		str	r1, [r7]
  60:Core/Src/swo.c ****   uint32_t SWOSpeed = 64000; /* default 64k baud rate */
 212              		.loc 1 60 12
 213 000a 4FF47A43 		mov	r3, #64000
 214 000e FB60     		str	r3, [r7, #12]
  61:Core/Src/swo.c ****   uint32_t SWOPrescaler = (cpuCoreFreqHz / SWOSpeed) - 1; /* SWOSpeed in Hz, note that cpuCoreFreqH
 215              		.loc 1 61 42
 216 0010 3A68     		ldr	r2, [r7]
 217 0012 FB68     		ldr	r3, [r7, #12]
 218 0014 B2FBF3F3 		udiv	r3, r2, r3
 219              		.loc 1 61 12
 220 0018 013B     		subs	r3, r3, #1
 221 001a BB60     		str	r3, [r7, #8]
ARM GAS  C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s 			page 6


  62:Core/Src/swo.c **** 
  63:Core/Src/swo.c ****   CoreDebug->DEMCR = CoreDebug_DEMCR_TRCENA_Msk; /* enable trace in core debug */
 222              		.loc 1 63 12
 223 001c 144B     		ldr	r3, .L14
 224              		.loc 1 63 20
 225 001e 4FF08072 		mov	r2, #16777216
 226 0022 DA60     		str	r2, [r3, #12]
  64:Core/Src/swo.c ****   *((volatile unsigned *)(ITM_BASE + 0x400F0)) = 0x00000002; /* "Selected PIN Protocol Register": S
 227              		.loc 1 64 3
 228 0024 134B     		ldr	r3, .L14+4
 229              		.loc 1 64 48
 230 0026 0222     		movs	r2, #2
 231 0028 1A60     		str	r2, [r3]
  65:Core/Src/swo.c ****   *((volatile unsigned *)(ITM_BASE + 0x40010)) = SWOPrescaler; /* "Async Clock Prescaler Register".
 232              		.loc 1 65 3
 233 002a 134A     		ldr	r2, .L14+8
 234              		.loc 1 65 48
 235 002c BB68     		ldr	r3, [r7, #8]
 236 002e 1360     		str	r3, [r2]
  66:Core/Src/swo.c ****   *((volatile unsigned *)(ITM_BASE + 0x00FB0)) = 0xC5ACCE55; /* ITM Lock Access Register, C5ACCE55 
 237              		.loc 1 66 3
 238 0030 124B     		ldr	r3, .L14+12
 239              		.loc 1 66 48
 240 0032 134A     		ldr	r2, .L14+16
 241 0034 1A60     		str	r2, [r3]
  67:Core/Src/swo.c ****   ITM->TCR = ITM_TCR_TraceBusID_Msk | ITM_TCR_SWOENA_Msk | ITM_TCR_SYNCENA_Msk | ITM_TCR_ITMENA_Msk
 242              		.loc 1 67 6
 243 0036 4FF06043 		mov	r3, #-536870912
 244              		.loc 1 67 12
 245 003a 124A     		ldr	r2, .L14+20
 246 003c C3F8802E 		str	r2, [r3, #3712]
  68:Core/Src/swo.c ****   ITM->TPR = ITM_TPR_PRIVMASK_Msk; /* ITM Trace Privilege Register */
 247              		.loc 1 68 6
 248 0040 4FF06043 		mov	r3, #-536870912
 249              		.loc 1 68 12
 250 0044 0F22     		movs	r2, #15
 251 0046 C3F8402E 		str	r2, [r3, #3648]
  69:Core/Src/swo.c ****   ITM->TER = portBits; /* ITM Trace Enable Register. Enabled tracing on stimulus ports. One bit per
 252              		.loc 1 69 6
 253 004a 4FF06042 		mov	r2, #-536870912
 254              		.loc 1 69 12
 255 004e 7B68     		ldr	r3, [r7, #4]
 256 0050 C2F8003E 		str	r3, [r2, #3584]
  70:Core/Src/swo.c ****   *((volatile unsigned *)(ITM_BASE + 0x01000)) = 0x400003FE; /* DWT_CTRL */
 257              		.loc 1 70 3
 258 0054 0C4B     		ldr	r3, .L14+24
 259              		.loc 1 70 48
 260 0056 0D4A     		ldr	r2, .L14+28
 261 0058 1A60     		str	r2, [r3]
  71:Core/Src/swo.c ****   *((volatile unsigned *)(ITM_BASE + 0x40304)) = 0x00000100; /* Formatter and Flush Control Registe
 262              		.loc 1 71 3
 263 005a 0D4B     		ldr	r3, .L14+32
 264              		.loc 1 71 48
 265 005c 4FF48072 		mov	r2, #256
 266 0060 1A60     		str	r2, [r3]
  72:Core/Src/swo.c **** }
 267              		.loc 1 72 1
ARM GAS  C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s 			page 7


 268 0062 00BF     		nop
 269 0064 1437     		adds	r7, r7, #20
 270              	.LCFI14:
 271              		.cfi_def_cfa_offset 4
 272 0066 BD46     		mov	sp, r7
 273              	.LCFI15:
 274              		.cfi_def_cfa_register 13
 275              		@ sp needed
 276 0068 5DF8047B 		ldr	r7, [sp], #4
 277              	.LCFI16:
 278              		.cfi_restore 7
 279              		.cfi_def_cfa_offset 0
 280 006c 7047     		bx	lr
 281              	.L15:
 282 006e 00BF     		.align	2
 283              	.L14:
 284 0070 F0ED00E0 		.word	-536810000
 285 0074 F00004E0 		.word	-536608528
 286 0078 100004E0 		.word	-536608752
 287 007c B00F00E0 		.word	-536866896
 288 0080 55CEACC5 		.word	-978530731
 289 0084 15007F00 		.word	8323093
 290 0088 001000E0 		.word	-536866816
 291 008c FE030040 		.word	1073742846
 292 0090 040304E0 		.word	-536607996
 293              		.cfi_endproc
 294              	.LFE2:
 296              		.text
 297              	.Letext0:
 298              		.file 2 "C:/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/13.2 Rel1/arm-none-eabi/include/ma
 299              		.file 3 "C:/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/13.2 Rel1/arm-none-eabi/include/sy
 300              		.file 4 "Core/Inc/TraceRegisters.h"
ARM GAS  C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 swo.c
C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s:21     .text.SWO_PrintChar:00000000 $t
C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s:27     .text.SWO_PrintChar:00000000 SWO_PrintChar
C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s:126    .text.SWO_PrintString:00000000 $t
C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s:132    .text.SWO_PrintString:00000000 SWO_PrintString
C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s:187    .text.SWO_Init:00000000 $t
C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s:193    .text.SWO_Init:00000000 SWO_Init
C:\Users\Siddhesh\AppData\Local\Temp\ccMTEEvO.s:284    .text.SWO_Init:00000070 $d
                           .group:00000000 wm4.0.f079ee757cd02b273648dd4f0fb0fb55
                           .group:00000000 wm4._newlib_version.h.4.6d111ab2e95434b664b53815e5c8ccba
                           .group:00000000 wm4.features.h.33.2eefb68b261e70563a8ac654e712169f
                           .group:00000000 wm4._default_types.h.15.247e5cd201eca3442cbf5404108c4935
                           .group:00000000 wm4._intsup.h.10.48bafbb683905c4daa4565a85aeeb264
                           .group:00000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:00000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:00000000 wm4.TraceRegisters.h.9.e3460b48b8d84977fbf4095f75239540

NO UNDEFINED SYMBOLS
